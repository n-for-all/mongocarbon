import{r as o,b as f,j as e,F as N}from"./components-Cj7Yk1Hh.js";import"./index-_rCr0AGk.js";import{M as T,F as v}from"./Modal-K69mcxHf.js";import{S,T as g}from"./TextInput-CKh2Yhf_.js";const y=({open:p,onClose:d,onSuccess:h})=>{const[t,a]=o.useState({dbName:"",collectionName:""}),[i,r]=o.useState({}),s=f();o.useEffect(()=>{s.data&&s.data.status=="success"?(l("Created!"),n("finished"),setTimeout(()=>{h(t.dbName.trim(),t.collectionName.trim()),d()},2e3)):s.data&&s.data.status=="error"&&(l(s.data.message||""),n("error"),r(s.data.errors||{}),setTimeout(()=>{b()},2e3))},[s.data]);const[c,n]=o.useState("inactive"),[x,l]=o.useState("Creating..."),m=async()=>{n("active"),s.submit({create:t},{method:"POST",encType:"application/json",action:"/database"})},b=()=>{n("inactive"),l("Creating...")};return e.jsx(e.Fragment,{children:e.jsx(T,{open:p,onRequestClose:d,onRequestSubmit:m,loadingStatus:s.state=="loading"||s.state=="submitting"?"active":c,loadingDescription:x,onLoadingSuccess:b,modalHeading:"Create a new database",modalLabel:"Database",primaryButtonText:"Create",secondaryButtonText:"Cancel",children:e.jsx(N,{"aria-label":"Database form",autoComplete:"new-password",children:e.jsxs(S,{gap:4,children:[e.jsx(g,{id:"name",labelText:"Database Name",type:"text",autoComplete:"new-password",required:!0,invalid:i.dbName,invalidText:i.dbName,helperText:"Enter a name for this database",value:t.dbName,onChange:u=>{a({...t,dbName:u.target.value})}}),e.jsx("hr",{}),e.jsxs(v,{legendText:"Collection Name",children:[e.jsx(g,{id:"collectionName",labelText:"Collection Name",autoComplete:"new-password",hideLabel:!0,type:"text",required:!0,invalid:i.collectionName,invalidText:i.collectionName,helperText:"You need to add a collection to create the database",value:t.collectionName,onChange:u=>{a({...t,collectionName:u.target.value})}}),e.jsxs("small",{className:"block mt-1",children:[e.jsx("b",{children:"*"}),"MongoDb will only create a database if a collection is added.",e.jsx("a",{className:"text-blue-600 hover:underline",target:"_blank",href:"https://www.mongodb.com/resources/products/fundamentals/create-database",children:"View More"})]})]})]})})})})},q=({open:p,onClose:d,onSuccess:h,name:t})=>{const a=f(),[i,r]=o.useState("inactive"),[s,c]=o.useState("Deleting..."),[n,x]=o.useState(""),[l,m]=o.useState({});o.useEffect(()=>{a.data&&a.data.status=="success"?(c("Deleted!"),r("finished"),setTimeout(()=>{h(),d()},2e3)):a.data&&a.data.status=="error"&&(c(a.data.message||""),r("error"),setTimeout(()=>{r("inactive"),c("Deleting...")},2e3))},[a.data]);const b=async()=>{if(n!=t){m({name:"The name does not match the database name"});return}r("active"),a.submit({delete:{name:t}},{method:"POST",encType:"application/json",action:"/database"})};return!t||t==""?null:e.jsxs(T,{open:p,danger:!0,loadingStatus:a.state=="loading"||a.state=="submitting"?"active":i,loadingDescription:s,modalHeading:"Drop Database",modalLabel:"Database",primaryButtonText:"Yes",secondaryButtonText:"No",onRequestClose:d,onRequestSubmit:b,children:[e.jsxs("h3",{children:["Are you sure you want to drop the database ",e.jsxs("b",{children:['"',t,'"']}),"?"]}),e.jsx("div",{className:"mb-4 text-xs",children:"Dropping a database will delete all collections and documents in the database and this action cannot be undone"}),e.jsx(g,{id:"name",labelText:"Type the name of the database to confirm",type:"text",autoComplete:"new-password",required:!0,placeholder:t,invalid:!!l.confirmName,invalidText:l.confirmName,value:n,onChange:u=>{m(()=>({})),x(u.target.value)}})]})};export{q as D,y as a};

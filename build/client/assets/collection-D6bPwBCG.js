import{r as s,b as T,j as t,F as b}from"./components-Cj7Yk1Hh.js";import"./index-_rCr0AGk.js";import{M as C,F as v}from"./Modal-K69mcxHf.js";import{S as j,T as S}from"./TextInput-CKh2Yhf_.js";const E=({dbName:c,open:d,onClose:u,onSuccess:x})=>{const[a,o]=s.useState({collectionName:""}),[m,i]=s.useState({}),e=T();s.useEffect(()=>{e.data&&e.data.status=="success"?(r("Created!"),n("finished"),setTimeout(()=>{x(c,a.collectionName.trim()),u()},2e3)):e.data&&e.data.status=="error"&&(r(e.data.message||""),n("error"),i(e.data.errors||{}),setTimeout(()=>{h()},2e3))},[e.data]);const[l,n]=s.useState("inactive"),[g,r]=s.useState("Creating..."),p=async()=>{n("active"),e.submit({create:a},{method:"POST",encType:"application/json",action:`/database/${c}`})},h=()=>{n("inactive"),r("Creating...")};return t.jsx(t.Fragment,{children:t.jsx(C,{open:d,onRequestClose:u,onRequestSubmit:p,loadingStatus:e.state=="loading"||e.state=="submitting"?"active":l,loadingDescription:g,onLoadingSuccess:h,modalHeading:"Create a new collection",modalLabel:"Collection",primaryButtonText:"Create",secondaryButtonText:"Cancel",children:t.jsx(b,{"aria-label":"Collection form",autoComplete:"new-password",children:t.jsx(j,{gap:4,children:t.jsx(v,{legendText:"Collection Name",children:t.jsx(S,{id:"collectionName",labelText:"Collection Name",autoComplete:"new-password",hideLabel:!0,type:"text",required:!0,invalid:m.collectionName,invalidText:m.collectionName,helperText:"Enter the name of the collection you want to create",value:a.collectionName,onChange:f=>{o({...a,collectionName:f.target.value})}})})})})})})},q=({open:c,onClose:d,onSuccess:u,dbName:x,collectionName:a})=>{const o=T(),[m,i]=s.useState("inactive"),[e,l]=s.useState("Deleting..."),[n,g]=s.useState(""),[r,p]=s.useState({});s.useEffect(()=>{o.data&&o.data.status=="success"?(l("Deleted!"),i("finished"),setTimeout(()=>{u(),d()},2e3)):o.data&&o.data.status=="error"&&(l(o.data.message||""),i("error"),setTimeout(()=>{i("inactive"),l("Deleting...")},2e3))},[o.data]);const h=async()=>{if(n!=a){p({collectionName:"The name does not match the collection name"});return}i("active"),o.submit({delete:{collectionName:a}},{method:"POST",encType:"application/json",action:`/database/${x}`})};return!a||a==""?null:t.jsxs(C,{open:c,danger:!0,loadingStatus:o.state=="loading"||o.state=="submitting"?"active":m,loadingDescription:e,modalHeading:"Drop Collection",modalLabel:"Collection",primaryButtonText:"Yes",secondaryButtonText:"No",onRequestClose:d,onRequestSubmit:h,children:[t.jsxs("h3",{children:["Are you sure you want to delete the collection ",t.jsxs("b",{children:['"',a,'"']}),"?"]}),t.jsx("div",{className:"mb-4 text-xs",children:"Deleting a collection will delete all documents in the collection and this action cannot be undone"}),t.jsx(S,{id:"name",labelText:"Type the name of the collection to confirm",type:"text",autoComplete:"new-password",required:!0,placeholder:a,invalid:!!r.collectionName,invalidText:r.collectionName,value:n,onChange:f=>{p({}),g(f.target.value)}})]})};export{E as C,q as a};

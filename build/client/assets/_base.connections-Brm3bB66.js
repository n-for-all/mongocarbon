import{u as x,R as i,b as p,r as h,j as e}from"./components-Cj7Yk1Hh.js";import"./index-_rCr0AGk.js";import{A as u,a as b}from"./AccordionItem-DNYUtNot.js";import{B as t}from"./Button-Bl4KegFP.js";import{A as f}from"./Notification-t-CAZq57.js";import{L as j}from"./index-BgfNTfNX.js";import{C as N}from"./connection-DdvKsJfI.js";import{L as w}from"./logo-BYODAW8L.js";import{C as d}from"./bucket-3-B5cXRAyd.js";import{E as C}from"./TextInput-CKh2Yhf_.js";import"./index-DCm1eCXF.js";import"./Modal-K69mcxHf.js";import"./index-B37bIhWk.js";function B(){const c=x(),{connections:m}=c,[n,o]=i.useState(null),a=p();h.useEffect(()=>{if(a.data&&a.data.status=="success"){window.location.href=a.data.redirect||"/";return}else a.data&&a.data.status=="error"&&(o(a.data.message||null),setTimeout(()=>{o(null)},2e3))},[a.data]);const[l,r]=i.useState({mode:"add",open:!1,connection:null});return e.jsxs(e.Fragment,{children:[e.jsxs(j,{className:"w-full max-w-md p-6 mx-auto my-16 mb-16 bg-white border border-solid shadow-lg border-neutral-200",children:[e.jsx("h2",{className:"mb-2 text-4xl font-bold",children:e.jsx(w,{className:"h-8"})}),e.jsx("p",{className:"mb-10 text-sm",children:"Welcome to MongoCarbon, Please select or create a new connection below:"}),e.jsx(u,{children:m.map(s=>e.jsxs(b,{title:s.name,className:"bg-neutral-100",children:[e.jsx("h3",{className:"mb-2 text-xl font-medium",children:s.name}),e.jsxs("div",{className:"flex flex-col gap-2 break-all",children:[e.jsxs("div",{className:"flex flex-col py-2 border-t border-b border-solid border-neutral-200",children:[e.jsx("span",{className:"text-sm",children:"Connection String:"})," ",e.jsx("span",{className:"font-medium",children:s.connectionString})]}),e.jsxs("div",{className:"flex py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Max Pool Size:"})," ",e.jsx("span",{className:"ml-2",children:s.maxPoolSize})]}),e.jsxs("div",{className:"flex py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Allow Disk Use:"})," ",e.jsx("span",{className:"ml-2",children:s.allowDiskUse?"Yes":"No"})]}),e.jsxs("div",{className:"flex flex-col py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Whitelist:"})," ",e.jsx("span",{className:"ml-2",children:s.whitelist})]}),e.jsxs("div",{className:"flex flex-col py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Blacklist:"})," ",e.jsx("span",{className:"ml-2",children:s.blacklist})]})]}),e.jsxs("div",{className:"flex w-full gap-2 mt-4",children:[e.jsx(t,{size:"sm",kind:"primary",renderIcon:d,onClick:()=>{a.submit({connect:s},{method:"POST",encType:"application/json",action:"/connections"})},children:"Connect"}),e.jsx(t,{size:"sm",kind:"ghost",renderIcon:C,onClick:()=>{r({mode:"edit",open:!0,connection:s})},className:"ml-auto",children:"Edit"})]})]},s.id))}),e.jsx("div",{className:"mt-4",children:e.jsx(t,{size:"sm",kind:"tertiary",renderIcon:d,onClick:()=>{r({mode:"add",open:!0,connection:null})},children:"Add Connection"})})]}),n&&e.jsx("div",{className:"fixed -translate-x-1/2 left-1/2 bottom-10",children:e.jsx(f,{title:"Error",subtitle:n,closeOnEscape:!0,inline:!1,onClose:()=>o(null)})}),e.jsx(N,{open:l.open,mode:l.mode,initialData:l.connection,onSuccess:()=>window.location.reload(),onClose:()=>{r({...l,open:!1,connection:null})}})]})}export{B as default};

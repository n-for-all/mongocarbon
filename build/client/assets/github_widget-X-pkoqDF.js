import{R as n,j as e,r as u}from"./components-Cj7Yk1Hh.js";import{a as w}from"./bucket-10-BakHwRxf.js";import{e as L}from"./TextInput-CKh2Yhf_.js";import{I as N}from"./Button-Bl4KegFP.js";import{e as U,f as C}from"./bucket-3-B5cXRAyd.js";var D,E;const B=n.forwardRef(function(r,a){let{children:l,size:t=16,...s}=r;return t===16||t==="16"||t==="16px"?n.createElement(N,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...s},D||(D=n.createElement("path",{d:"M13 7L12.3 6.3 8.5 10.1 8.5 1 7.5 1 7.5 10.1 3.7 6.3 3 7 8 12zM13 12v2H3v-2H2v2l0 0c0 .6.4 1 1 1h10c.6 0 1-.4 1-1l0 0v-2H13z"})),l):n.createElement(N,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...s},E||(E=n.createElement("path",{d:"M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"})),l)});var R;const F=n.forwardRef(function(r,a){let{children:l,size:t=16,...s}=r;return n.createElement(N,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...s},R||(R=n.createElement("path",{strokeWidth:"0",d:"m20,6c0,1.8584,1.2798,3.4106,3,3.8579v5.1421h-14v-5.1421c1.7202-.4473,3-1.9995,3-3.8579,0-2.2056-1.7944-4-4-4s-4,1.7944-4,4c0,1.8584,1.2798,3.4106,3,3.8579v5.1421c0,1.103.897,2,2,2h6v5.1421c-1.7202.4473-3,1.9995-3,3.8579,0,2.2056,1.7944,4,4,4s4-1.7944,4-4c0-1.8584-1.2798-3.4106-3-3.8579v-5.1421h6c1.103,0,2-.897,2-2v-5.1421c1.7202-.4473,3-1.9995,3-3.8579,0-2.2056-1.7944-4-4-4s-4,1.7944-4,4Zm-14,0c0-1.103.897-2,2-2s2,.897,2,2c0,1.103-.897,2-2,2s-2-.897-2-2Zm12,20c0,1.103-.897,2-2,2s-2-.897-2-2c0-1.103.897-2,2-2s2,.897,2,2ZM26,6c0,1.103-.897,2-2,2s-2-.897-2-2c0-1.103.897-2,2-2s2,.897,2,2Z"})),l)}),W=({repo:c,version:r,title:a})=>{const[l,t]=c.split("/"),s=`http://github.com/${l}/${t}`;return e.jsx("div",{className:"inline-flex items-center",children:e.jsxs("a",{target:"_blank",className:"inline-flex w-9 overflow-hidden lg:w-auto items-center gap-2 px-2 py-1.5 text-sm border border-solid rounded-sm border-neutral-300 bg-neutral-50",href:s,children:[e.jsx(w,{className:"flex-shrink-0 w-5 h-5"})," ",a," ",r?e.jsxs("b",{children:["v",r]}):null]})})},T=({repo:c,travis:r,title:a,version:l})=>{const[t,s]=u.useState(null),[k,g]=u.useState(!0),[p,$]=u.useState(null),[m,f]=c.split("/"),S=`http://github.com/${m}`,i=`http://github.com/${m}/${f}`,H=`https://travis-ci.org/${m}/${f}.png?branch=master`,M=`https://travis-ci.org/${m}/${f}/builds`,[b,_]=u.useState(!1);if(u.useEffect(()=>{const x=`https://api.github.com/repos/${c}`;(async()=>{try{const o=localStorage.getItem(x);let j;if(o){const y=JSON.parse(o)._cachedAt;j=(new Date().getTime()-y)/1e3/60}if(j&&j<20&&o)s(JSON.parse(o)),g(!1);else{const d=await(await fetch(x)).json();d.message&&/Rate Limit/i.test(d.message)?o?s(JSON.parse(o)):$("Rate limit exceeded"):(d._cachedAt=new Date().getTime(),localStorage.setItem(x,JSON.stringify(d)),s(d)),g(!1)}}catch{$("Failed to fetch repository data"),g(!1)}})()},[c]),p)return e.jsx("div",{className:"text-red-500",children:p});if(!t)return null;const v=new Date(t.pushed_at),z=`${v.getMonth()+1}-${v.getDate()}-${v.getFullYear()}`;let h=null;return k?h=e.jsx("div",{children:"Loading..."}):p?h=e.jsx("div",{className:"text-red-500",children:p}):t?h=e.jsx("div",{className:"overflow-hidden transition-all duration-500 "+(b?"max-h-48":"max-h-0"),children:e.jsxs("div",{className:"p-4 overflow-auto h-full  border border-solid rounded-md border-neutral-300 bg-neutral-50 ",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 mb-2 border-b border-neutral-300",children:[e.jsxs("h3",{className:"flex gap-0.5 font-semibold text-neutral-700 text-md",children:[e.jsx(w,{className:"w-6 h-6 mr-1"}),e.jsx("a",{className:"text-blue-500",href:S,children:m}),"/",e.jsx("a",{className:"text-blue-500",href:i,children:f})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("a",{className:"flex items-center gap-1 text-sm text-neutral-600 watchers",href:`${i}/watchers`,children:[e.jsx(L,{}),t.watchers]}),e.jsxs("a",{className:"flex items-center gap-1 text-sm text-neutral-600 forks",href:`${i}/network/members`,children:[e.jsx(F,{}),t.forks]})]})]}),e.jsxs("div",{className:"mb-2 ",children:[e.jsxs("p",{className:"text-sm text-neutral-700",children:[t.description," â€”"," ",e.jsx("a",{className:"text-blue-500",href:`${i}#readme`,children:"Read More"})]}),t.homepage&&e.jsx("p",{className:"text-sm",children:e.jsx("a",{className:"text-blue-500",href:t.homepage,children:t.homepage})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-neutral-300",children:[e.jsxs("p",{className:"text-sm text-neutral-600 updated",children:["Latest commit to the ",e.jsx("strong",{children:"master"})," branch on ",z]}),e.jsxs("div",{className:"flex items-center justify-start mt-2 ml-2 space-x-2",children:[r&&e.jsx("a",{href:M,children:e.jsx("img",{className:"travis",src:H,alt:"Build status"})}),e.jsx("a",{className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium border border-solid rounded-sm text-neutral-700 border-neutral-200 hover:bg-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neutral-200",href:`${i}/zipball/master`,children:e.jsx(B,{})})]})]})]})}):h=e.jsx("div",{className:"text-red-500",children:"No data"}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inline-flex mb-4 border border-solid rounded-sm border-neutral-300 bg-neutral-50",children:[e.jsxs("a",{target:"_blank",className:"inline-flex items-center gap-2 px-2 py-1 my-1 text-sm ",href:i,children:[e.jsx(w,{className:"w-6 h-6"})," ",a," ",e.jsxs("b",{children:["v",l]})]}),e.jsx("a",{onClick:x=>{x.preventDefault(),_(!b)},className:"inline-flex items-center gap-2 px-2 py-1 my-1 ml-2 text-sm border-l border-solid border-neutral-200",href:i,children:b?e.jsx(U,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"})})]}),h]})};export{T as G,W as a};

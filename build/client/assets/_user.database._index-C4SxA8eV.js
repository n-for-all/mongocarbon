import{u as D,r as n,a as g,j as e}from"./components-Cj7Yk1Hh.js";import"./index-_rCr0AGk.js";import{B as d}from"./Button-Bl4KegFP.js";import{G as y,C as v}from"./Column-BatEsPZP.js";import{I as N}from"./Notification-t-CAZq57.js";import{S,a as k,b as C}from"./Search-BNe1a6wo.js";import{T as z,c as x,S as O,a as i}from"./functions-B7s41jYM.js";import{D as w}from"./database-Dl88dlG2.js";import{D as B}from"./bucket-4-DNu0uQyD.js";import{T as I}from"./bucket-17-BFRBnihc.js";import{a as T}from"./bucket-3-B5cXRAyd.js";import"./TextInput-CKh2Yhf_.js";import"./Modal-K69mcxHf.js";import"./index-BgfNTfNX.js";import"./index-B37bIhWk.js";function K(){const l=D(),[p,h]=n.useState(""),[r,u]=n.useState("asc"),[o,c]=n.useState(null),[m,f]=n.useState(""),j=g(),t=l?.stats;if(l?.error)return e.jsx(N,{title:"Error",subtitle:l.error,hideCloseButton:!0});if(!t)return e.jsx("div",{children:"Loading..."});switch(p){case"name":r=="desc"?t.databases.sort((s,a)=>a.name.localeCompare(s.name)):t.databases.sort((s,a)=>s.name.localeCompare(a.name));break;case"sizeOnDisk":r=="desc"?t.databases.sort((s,a)=>a.sizeOnDisk-s.sizeOnDisk):t.databases.sort((s,a)=>s.sizeOnDisk-a.sizeOnDisk);break;case"empty":r=="desc"?t.databases.sort((s,a)=>a.empty-s.empty):t.databases.sort((s,a)=>s.empty-a.empty);break}return e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"database-page",fullWidth:!0,children:e.jsxs(v,{lg:16,md:8,sm:4,children:[e.jsxs("div",{className:"flex items-center justify-between pb-4",children:[e.jsxs("div",{children:[e.jsxs(z,{title:t.databases.length,children:[e.jsx("span",{className:"font-normal opacity-50",children:"Databases:"})," ",t.databases.length]}),e.jsxs("p",{className:"text-sm",children:["Total Size: ",x(t.totalSize)]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(S,{placeholder:"Find a database",labelText:"Search",closeButtonLabelText:"Clear search input",id:"search-database",onChange:s=>{f(s.target.value)}}),e.jsx("span",{className:"text-sm",children:"Sort:"}),e.jsxs(O,{hideLabel:!0,id:"sort",onChange:s=>{h(s.target.value)},children:[e.jsx(i,{value:"",text:"---"}),e.jsx(i,{value:"name",text:"By Name"}),e.jsx(i,{value:"sizeOnDisk",text:"By Size on Disk"}),e.jsx(i,{value:"empty",text:"By Empty"})]}),e.jsx(d,{hasIconOnly:!0,size:"md",kind:"ghost",renderIcon:r=="asc"?k:C,iconDescription:"Sort Direction",onClick:s=>{s.preventDefault(),u(r=="asc"?"desc":"asc")}})]})]}),t.databases.map((s,a)=>m&&m.trim()!=""&&s.name.toLowerCase().indexOf(m.toLowerCase())!=0?null:e.jsxs("div",{className:"mb-3 bg-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-base border-b border-solid border-neutral-200",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{})," ",e.jsx("strong",{children:s.name})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(d,{kind:"danger--tertiary",renderIcon:I,size:"sm",onClick:b=>{b.preventDefault(),c(s.name)},children:"Drop Database"}),e.jsx(d,{kind:"tertiary",renderIcon:T,size:"sm",href:`/database/${s.name}`,children:"View"})]})]}),e.jsxs("div",{className:"grid grid-cols-5 px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"block mb-1 font-bold",children:"Size on Disk:"}),e.jsx("span",{className:"font-normal",children:x(s.sizeOnDisk)})]}),e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"block mb-1 font-bold",children:"Empty:"}),e.jsx("span",{className:"font-normal",children:s.empty?"Yes":"No"})]})]})]},a))]})}),e.jsx(w,{open:!(o==null||o==""),onClose:()=>{c(null)},onSuccess:()=>{c(null),j("/database",{replace:!0})},name:o||""})]})}export{K as default};

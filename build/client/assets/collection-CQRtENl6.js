import{r as s,b as f,j as o,F as j}from"./components-BPOIHgDc.js";import{I as C}from"./input-ChpOE9Lf.js";import{M as b}from"./select-Cem4k-Od.js";import{t as x}from"./x-OohQberg.js";const N=({dbName:l,open:c,onClose:d,onSuccess:m})=>{const[t,a]=s.useState({collectionName:""}),[p,n]=s.useState({}),e=f();s.useEffect(()=>{e.data&&e.data.status=="success"?(r("Created!"),x({title:"Connected!",description:e.data.message||"Connected!",type:"background"}),setTimeout(()=>{m(l,t.collectionName.trim()),d()},2e3)):e.data&&e.data.status=="error"&&(r(e.data.message||""),n(e.data.errors||{}),x({title:"Error",description:e.data.message||"An error occurred",type:"background"}))},[e.data]);const[i,r]=s.useState("Creating..."),h=async()=>{e.submit({create:t},{method:"POST",encType:"application/json",action:`/database/${l}`})};return o.jsx(o.Fragment,{children:o.jsx(b,{open:c,onClose:d,onPrimaryClick:h,loading:e.state=="loading"||e.state=="submitting",loadingDescription:i,modalHeading:"Create a new collection",modalLabel:"Collection",primaryButtonText:"Create",secondaryButtonText:"Cancel",children:o.jsx(j,{"aria-label":"Collection form",autoComplete:"new-password",children:o.jsx(C,{id:"collectionName",labelText:"Collection Name",autoComplete:"new-password",type:"text",required:!0,invalid:p.collectionName,invalidText:p.collectionName,helperText:"Enter the name of the collection you want to create",value:t.collectionName,onChange:u=>{a({...t,collectionName:u.target.value})}})})})})},E=({open:l,onClose:c,onSuccess:d,dbName:m,collectionName:t})=>{const a=f(),[p,n]=s.useState("inactive"),[e,i]=s.useState("Deleting..."),[r,h]=s.useState(""),[u,g]=s.useState({});s.useEffect(()=>{a.data&&a.data.status=="success"?(i("Deleted!"),n("finished"),setTimeout(()=>{d(),c()},2e3)):a.data&&a.data.status=="error"&&(i(a.data.message||""),n("error"),setTimeout(()=>{n("inactive"),i("Deleting...")},2e3))},[a.data]);const y=async()=>{if(r!=t){g({collectionName:"The name does not match the collection name"});return}n("active"),a.submit({delete:{collectionName:t}},{method:"POST",encType:"application/json",action:`/database/${m}`})};return!t||t==""?null:o.jsxs(b,{open:l,danger:!0,loading:a.state=="loading"||a.state=="submitting",loadingDescription:e,modalHeading:"Drop Collection",modalLabel:"Collection",primaryButtonText:"Yes",secondaryButtonText:"No",onClose:c,onPrimaryClick:y,children:[o.jsxs("h3",{children:["Are you sure you want to delete the collection ",o.jsxs("b",{children:['"',t,'"']}),"?"]}),o.jsx("div",{className:"mb-4 text-xs",children:"Deleting a collection will delete all documents in the collection and this action cannot be undone"}),o.jsx(C,{id:"name",type:"text",labelText:"Type the name of the collection to confirm",autoComplete:"new-password",required:!0,placeholder:t,invalid:!!u.collectionName,invalidText:u.collectionName,value:r,onChange:T=>{g({}),h(T.target.value)}})]})};export{N as C,E as a};

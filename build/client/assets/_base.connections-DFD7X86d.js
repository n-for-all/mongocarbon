import{u as h,R as o,b as f,r as m,j as e}from"./components-BPOIHgDc.js";import{C as j}from"./connection-DQWmmeEw.js";import{L as N}from"./logo-COugf1Vw.js";import{A as g,a as v,b as w,c as C}from"./accordion-Cy3lx65E.js";import{B as n,V as x,b as y}from"./button-ZrFu6W_T.js";import{A as k}from"./actionable-notification-DDLqphrE.js";import{t as A}from"./x-OohQberg.js";import"./index-CZUknZXM.js";import"./select-Cem4k-Od.js";import"./utils-DcAaEMf9.js";import"./input-ChpOE9Lf.js";import"./alert-Do9tp9-j.js";function F(){const u=h(),{connections:p}=u,[i,d]=o.useState(null),[l,c]=o.useState(null),a=f();m.useEffect(()=>{a.state=="submitting"&&A({duration:1e4,type:"background",title:"Connecting, Please wait...",description:`Connecting to "${l?.name}"`,variant:"warning"})},[a.state]),m.useEffect(()=>{if(a.data&&a.data.status=="success"){let s=a.data.redirect||"/";setTimeout(()=>{window.location.href=s},1e3);return}else a.data&&a.data.status=="error"&&d(a.data.message||null);c(null)},[a.data]);const[r,t]=o.useState({mode:"add",open:!1,connection:null});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full max-w-md p-6 mx-auto my-16 mb-16 bg-white border border-solid border-neutral-200",children:[e.jsx("h2",{className:"mb-2 text-4xl font-bold",children:e.jsx(N,{className:"h-8"})}),e.jsx("p",{className:"mb-10 text-sm",children:"Welcome to MongoCarbon, Please select or create a new connection below:"}),e.jsx(g,{type:"single",collapsible:!0,className:"overflow-hidden ",children:p.map((s,b)=>e.jsxs(v,{value:s.id,title:s.name,className:"bg-neutral-100",children:[e.jsx(w,{className:"px-4 border-t border-solid border-neutral-200",children:e.jsx("span",{className:"font-medium",children:s.name})}),e.jsxs(C,{className:"px-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 break-all",children:[e.jsxs("div",{className:"flex flex-col py-2 border-t border-b border-solid border-neutral-200",children:[e.jsx("span",{className:"text-sm",children:"Connection String:"})," ",e.jsx("span",{className:"font-medium",children:s.connectionString})]}),e.jsxs("div",{className:"flex py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Max Pool Size:"})," ",e.jsx("span",{className:"ml-2",children:s.maxPoolSize})]}),e.jsxs("div",{className:"flex py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Allow Disk Use:"})," ",e.jsx("span",{className:"ml-2",children:s.allowDiskUse?"Yes":"No"})]}),e.jsxs("div",{className:"flex flex-col py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Whitelist:"})," ",e.jsx("span",{className:"ml-2",children:s.whitelist})]}),e.jsxs("div",{className:"flex flex-col py-2 text-sm border-b border-solid border-neutral-200",children:[e.jsx("span",{children:"Blacklist:"})," ",e.jsx("span",{className:"ml-2",children:s.blacklist})]})]}),e.jsxs("div",{className:"flex w-full gap-2 mt-4",children:[e.jsx(n,{size:"sm",variant:"default",loading:!!l&&l.id==s.id,icon:e.jsx(x,{}),onClick:()=>{c(s),a.submit({connect:s},{method:"POST",encType:"application/json",action:"/connections"})},children:"Connect"}),e.jsx(n,{size:"sm",variant:"ghost",icon:e.jsx(y,{}),onClick:()=>{t({mode:"edit",open:!0,connection:s})},className:"ml-auto",children:"Edit"})]})]})]},`${s.id}-${b}`))}),e.jsx("div",{className:"mt-4",children:e.jsx(n,{size:"sm",variant:"secondary",icon:e.jsx(x,{}),onClick:()=>{t({mode:"add",open:!0,connection:null})},children:"Add Connection"})})]}),i&&e.jsx("div",{className:"fixed -translate-x-1/2 left-1/2 bottom-10",children:e.jsx(k,{variant:"error",title:"Error",subtitle:i,closeOnEscape:!0,inline:!1,onClose:()=>d(null)})}),e.jsx(j,{open:r.open,mode:r.mode,initialData:r.connection,onSuccess:()=>window.location.reload(),onClose:()=>{t({...r,open:!1,connection:null})}})]})}export{F as default};

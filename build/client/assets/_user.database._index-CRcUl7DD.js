import{u as D,r as l,a as g,j as e}from"./components-BPOIHgDc.js";import{T as v,c as p}from"./functions-DMKVu1r-.js";import{B as x,S as N,a as S,D as y,T as k,A as z}from"./button-ZrFu6W_T.js";import{D as C}from"./database-D9MPVr0e.js";import{S as O,a as w,b as I,c as A}from"./select-Cem4k-Od.js";import{A as T,a as E,b as L}from"./alert-Do9tp9-j.js";import{S as B}from"./input-ChpOE9Lf.js";import"./index-CZUknZXM.js";import"./utils-DcAaEMf9.js";import"./x-OohQberg.js";var c=(r=>(r.name="Name",r.sizeOnDisk="Size on Disk",r.empty="Empty",r))(c||{});function J(){const r=D(),[o,h]=l.useState(""),[n,j]=l.useState("asc"),[m,d]=l.useState(null),[i,u]=l.useState(""),b=g(),t=r?.stats;if(r?.error)return e.jsxs(T,{children:[e.jsx(E,{children:"An error occurred while fetching the database stats."}),e.jsx(L,{children:r.error})]});if(!t)return e.jsx("div",{children:"Loading..."});switch(o){case"name":n=="desc"?t.databases.sort((s,a)=>a.name.localeCompare(s.name)):t.databases.sort((s,a)=>s.name.localeCompare(a.name));break;case"sizeOnDisk":n=="desc"?t.databases.sort((s,a)=>a.sizeOnDisk-s.sizeOnDisk):t.databases.sort((s,a)=>s.sizeOnDisk-a.sizeOnDisk);break;case"empty":n=="desc"?t.databases.sort((s,a)=>a.empty-s.empty):t.databases.sort((s,a)=>s.empty-a.empty);break}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"database-page",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between pb-4",children:[e.jsxs("div",{children:[e.jsxs(v,{title:t.databases.length,children:[e.jsx("span",{className:"font-normal opacity-50",children:"Databases:"})," ",t.databases.length]}),e.jsxs("p",{className:"text-sm",children:["Total Size: ",p(t.totalSize)]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(B,{placeholder:"Find a database",value:i,className:"bg-neutral-100",id:"search-database",onChange:s=>{u(s)}}),e.jsx("span",{className:"text-sm",children:"Sort:"}),e.jsxs(O,{onValueChange:s=>{h(s)},children:[e.jsx(w,{children:e.jsx("span",{className:"text-sm",children:o==""?"---":c[o]})}),e.jsx(I,{children:Object.keys(c).map(s=>e.jsx(A,{value:s,children:c[s]},s))})]}),e.jsx(x,{hasIconOnly:!0,size:"lg",variant:"ghost",icon:n=="asc"?e.jsx(N,{}):e.jsx(S,{}),tooltip:"Sort Direction",onClick:s=>{s.preventDefault(),j(n=="asc"?"desc":"asc")}})]})]}),t.databases.map((s,a)=>i&&i.trim()!=""&&s.name.toLowerCase().indexOf(i.toLowerCase())!=0?null:e.jsxs("div",{className:"mb-3 bg-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-base border-b border-solid border-neutral-200",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(y,{})," ",e.jsx("strong",{children:s.name})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(x,{variant:"error",icon:e.jsx(k,{}),size:"sm",onClick:f=>{f.preventDefault(),d(s.name)},children:"Drop Database"}),e.jsx(x,{variant:"secondary",iconPosition:"right",icon:e.jsx(z,{}),size:"sm",href:`/database/${s.name}`,children:"View"})]})]}),e.jsxs("div",{className:"grid grid-cols-5 px-4 py-2",children:[e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"block mb-1 font-bold",children:"Size on Disk:"}),e.jsx("span",{className:"font-normal",children:p(s.sizeOnDisk)})]}),e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"block mb-1 font-bold",children:"Empty:"}),e.jsx("span",{className:"font-normal",children:s.empty?"Yes":"No"})]})]})]},a))]})}),e.jsx(C,{open:!(m==null||m==""),onClose:()=>{d(null)},onSuccess:()=>{d(null),b("/database",{replace:!0})},name:m||""})]})}export{J as default};

import{r,b as h,j as e,F as N}from"./components-BPOIHgDc.js";import{I as x}from"./input-ChpOE9Lf.js";import{M as g}from"./select-Cem4k-Od.js";import{t as m}from"./x-OohQberg.js";const v=({open:u,onClose:n,onSuccess:b})=>{const[t,s]=r.useState({dbName:"",collectionName:""}),[o,i]=r.useState({}),a=h();r.useEffect(()=>{a.data&&a.data.status=="success"?(l("Created!"),m({title:"Database Created!",type:"background"}),setTimeout(()=>{b(t.dbName.trim(),t.collectionName.trim()),n()},2e3)):a.data&&a.data.status=="error"&&(l(a.data.message||""),i(a.data.errors||{}),m({title:"Error",description:a.data.message||"An error occurred",type:"background"}))},[a.data]);const[p,l]=r.useState("Creating..."),c=async()=>{a.submit({create:t},{method:"POST",encType:"application/json",action:"/database"})};return e.jsx(e.Fragment,{children:e.jsx(g,{open:u,onClose:n,onPrimaryClick:c,loading:a.state=="loading"||a.state=="submitting",loadingDescription:p,modalHeading:"Create a new database",modalLabel:"Database",primaryButtonText:"Create",secondaryButtonText:"Cancel",children:e.jsx(N,{"aria-label":"Database form",autoComplete:"new-password",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(x,{id:"name",labelText:"Database Name",type:"text",autoComplete:"new-password",required:!0,invalid:o.dbName,invalidText:o.dbName,helperText:"Enter a name for this database",value:t.dbName,onChange:d=>{s({...t,dbName:d.target.value})}}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx(x,{id:"collectionName",labelText:"Collection Name",autoComplete:"new-password",type:"text",required:!0,invalid:o.collectionName,invalidText:o.collectionName,helperText:"You need to add a collection to create the database",value:t.collectionName,onChange:d=>{s({...t,collectionName:d.target.value})}}),e.jsxs("small",{className:"block mt-4 mb-4 text-sm",children:[e.jsx("b",{children:"*"}),"MongoDb will only create a database if a collection is added.",e.jsx("a",{className:"ml-2 text-sm text-blue-600 hover:underline",target:"_blank",href:"https://www.mongodb.com/resources/products/fundamentals/create-database",children:"Learn More"})]})]})]})})})})},w=({open:u,onClose:n,onSuccess:b,name:t})=>{const s=h(),[o,i]=r.useState("Deleting..."),[a,p]=r.useState(""),[l,c]=r.useState({});r.useEffect(()=>{s.data&&s.data.status=="success"?(i("Deleted!"),m({title:"Database Deleted!",type:"background"}),setTimeout(()=>{b(),n()},2e3)):s.data&&s.data.status=="error"&&(i(s.data.message||""),m({title:"Error",description:s.data.message||"An error occurred",type:"background"}),setTimeout(()=>{i("Deleting...")},2e3))},[s.data]);const d=async()=>{if(a!=t){c({name:"The name does not match the database name"});return}s.submit({delete:{name:t}},{method:"POST",encType:"application/json",action:"/database"})};return!t||t==""?null:e.jsxs(g,{open:u,danger:!0,loading:s.state=="loading"||s.state=="submitting",loadingDescription:o,modalHeading:"Drop Database",modalLabel:"Database",primaryButtonText:"Yes",secondaryButtonText:"No",onClose:n,onPrimaryClick:d,children:[e.jsxs("h3",{children:["Are you sure you want to drop the database ",e.jsxs("b",{children:['"',t,'"']}),"?"]}),e.jsx("div",{className:"mb-4 text-xs",children:"Dropping a database will delete all collections and documents in the database and this action cannot be undone"}),e.jsx(x,{id:"name",labelText:"Type the name of the database to confirm",type:"text",autoComplete:"new-password",required:!0,placeholder:t,invalid:!!l.confirmName,invalidText:l.confirmName,value:a,onChange:f=>{c(()=>({})),p(f.target.value)}})]})};export{w as D,v as a};
